<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">电影详情 | 电影世界</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        .stars-container,
        .stars {
            display: inline-flex;
            justify-content: flex-start;
            align-items: center;
            gap: 5px;
            width: auto;
            position: relative;
        }

        .stars-container i,
        .stars i {
            font-size: 20px;
            width: 20px;
            text-align: center;
            position: relative;
        }

        .stars-container .fas.fa-star,
        .stars-container .fas.fa-star-half-alt,
        .stars .fas.fa-star {
            color: #FFD700;
        }

        .stars-container .far.fa-star,
        .stars .far.fa-star {
            color: #ddd;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            overflow: auto;
        }

        .modal-content {
            position: relative;
            margin: 5% auto;
            width: 80%;
            max-width: 900px;
            background-color: #222;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            padding: 20px;
        }

        .trailer-container {
            width: 100%;
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
        }

        .trailer-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 4px;
        }

        .close-modal {
            position: absolute;
            right: 10px;
            top: 5px;
            color: #fff;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            z-index: 10;
        }

        .close-modal:hover {
            color: #ff6b6b;
        }

        .review-moderation {
            background-color: rgba(40, 40, 40, 0.95);
            border-radius: 12px;
            padding: 40px 30px;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            border: 1px solid rgba(100, 100, 100, 0.2);
        }

        .moderation-content {
            max-width: 500px;
            margin: 0 auto;
        }

        .moderation-icon {
            margin-bottom: 25px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }

        .review-moderation h3 {
            font-size: 28px;
            margin-bottom: 15px;
            font-weight: 600;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .review-moderation p {
            font-size: 16px;
            line-height: 1.5;
            margin-bottom: 8px;
            color: #f0f0f0;
        }

        .moderation-info {
            color: #bbb !important;
            margin: 20px 0 15px !important;
            font-size: 15px !important;
        }

        .moderation-time {
            color: #fff !important;
            font-weight: bold;
            margin-top: 15px !important;
            font-size: 18px !important;
            background-color: rgba(60, 60, 60, 0.5);
            display: inline-block;
            padding: 10px 20px;
            border-radius: 50px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        #new-review-btn {
            margin-top: 30px !important;
            padding: 12px 28px;
            font-size: 16px;
            font-weight: 600;
            background-color: #e50914;
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(229, 9, 20, 0.3);
        }
    </style>
</head>

<body>
    <header>
        <div class="container">
            <div class="logo">
                <a href="index.html">
                    <h1>电影世界</h1>
                </a>
            </div>
            <nav>
                <ul class="main-nav">
                    <li><a href="index.html">首页</a></li>
                    <li><a href="contact.html">联系我们</a></li>
                </ul>
            </nav>
            <div class="user-actions">
                <button id="theme-toggle" title="切换主题">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="user-menu">
                    <a href="login.html" class="btn btn-primary">登录</a>
                    <a href="register.html" class="btn">注册</a>
                </div>
            </div>
            <div class="mobile-menu-toggle">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <main class="movie-detail-page">
        <section class="movie-hero">
            <div id="movie-backdrop" class="movie-backdrop">
                <div class="backdrop-overlay"></div>
            </div>
            <div class="container">
                <div class="movie-hero-content"
                    style="display: flex; flex-direction: column; align-items: center; text-align: center; padding: 30px 0;">
                    <div class="movie-poster-container" style="width: 70%; max-width: 350px; margin: 0 auto 20px;">
                        <img id="movie-poster" src="" alt="" class="movie-poster"
                            style="width: 100%; object-fit: cover; height: auto; max-height: none; border-radius: 10px; box-shadow: 0 10px 20px rgba(0,0,0,0.3);">
                        <div class="movie-actions"
                            style="display: flex; justify-content: center; margin-top: 20px; gap: 15px;">
                            <button class="btn btn-primary btn-play-trailer" data-trailer="trailer1.mp4"
                                style="padding: 10px 20px; font-size: 16px; white-space: nowrap;">
                                <i class="fas fa-play"></i> 观看预告片
                            </button>
                            <button class="btn btn-favorite" id="favoriteMovie" title="收藏电影"
                                style="padding: 10px 15px; font-size: 16px; background-color: rgba(50, 50, 50, 0.8);">
                                <i class="far fa-heart" style="color: #f8f8f8;"></i>
                            </button>
                            <button class="btn btn-share" title="分享"
                                style="padding: 10px 15px; font-size: 16px; background-color: rgba(50, 50, 50, 0.8);">
                                <i class="fas fa-share-alt" style="color: #f8f8f8;"></i>
                            </button>
                        </div>
                    </div>
                    <div class="movie-info-container"
                        style="width: 90%; max-width: 800px; margin: 20px auto; background-color: rgba(30, 30, 30, 0.8); padding: 25px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">
                        <div class="movie-header">
                            <h1 id="movie-title" class="movie-title" style="font-size: 2.2em; margin-bottom: 5px;"></h1>
                            <div id="movie-original-title" class="movie-original-title"
                                style="font-size: 1.2em; color: #aaa; margin-bottom: 10px;"></div>
                            <div class="movie-meta" style="margin-bottom: 15px;">
                                <span id="movie-year" class="movie-year" style="margin-right: 15px;"></span>
                                <span id="movie-runtime" class="movie-runtime"></span>
                            </div>
                            <div id="movie-genres" class="movie-genres" style="margin-bottom: 20px;">
                            </div>
                        </div>
                        <div class="movie-rating-container"
                            style="display: flex; justify-content: center; margin: 20px 0; gap: 30px;">
                            <div class="rating-circle"
                                style="position: relative; background: linear-gradient(45deg, #1a1a1a, #2a2a2a); border-radius: 50%; padding: 25px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; width: 150px; height: 150px;">
                                <div style="position: relative; text-align: center;">
                                    <div id="rating-number" class="rating-number"
                                        style="font-size: 3.5em; font-weight: bold; background: linear-gradient(45deg, #FFD700, #FFA500); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 2px 2px 4px rgba(0,0,0,0.2);">
                                        8.6</div>
                                </div>
                            </div>
                            <div class="rating-detail" style="flex: 1; max-width: 450px;">
                                <div class="user-votes">
                                    <div class="vote-bar" style="margin-bottom: 12px;">
                                        <span class="vote-label"
                                            style="color: #aaa; width: 45px; display: inline-block;">五星</span>
                                        <div class="vote-progress"
                                            style="display: inline-block; width: calc(100% - 110px); height: 12px; background-color: rgba(255,255,255,0.1); border-radius: 6px; overflow: hidden; margin: 0 10px; vertical-align: middle;">
                                            <div class="vote-progress-bar"
                                                style="width: 75%; height: 100%; background: linear-gradient(45deg, #4CAF50, #45a049); transition: width 0.3s ease;">
                                            </div>
                                        </div>
                                        <span class="vote-percent"
                                            style="color: #aaa; width: 45px; display: inline-block;">75%</span>
                                    </div>
                                    <div class="vote-bar" style="margin-bottom: 12px;">
                                        <span class="vote-label"
                                            style="color: #aaa; width: 45px; display: inline-block;">四星</span>
                                        <div class="vote-progress"
                                            style="display: inline-block; width: calc(100% - 110px); height: 12px; background-color: rgba(255,255,255,0.1); border-radius: 6px; overflow: hidden; margin: 0 10px; vertical-align: middle;">
                                            <div class="vote-progress-bar"
                                                style="width: 20%; height: 100%; background: linear-gradient(45deg, #8BC34A, #7cb342); transition: width 0.3s ease;">
                                            </div>
                                        </div>
                                        <span class="vote-percent"
                                            style="color: #aaa; width: 45px; display: inline-block;">20%</span>
                                    </div>
                                    <div class="vote-bar" style="margin-bottom: 12px;">
                                        <span class="vote-label"
                                            style="color: #aaa; width: 45px; display: inline-block;">三星</span>
                                        <div class="vote-progress"
                                            style="display: inline-block; width: calc(100% - 110px); height: 12px; background-color: rgba(255,255,255,0.1); border-radius: 6px; overflow: hidden; margin: 0 10px; vertical-align: middle;">
                                            <div class="vote-progress-bar"
                                                style="width: 3%; height: 100%; background: linear-gradient(45deg, #FFC107, #fdb900); transition: width 0.3s ease;">
                                            </div>
                                        </div>
                                        <span class="vote-percent"
                                            style="color: #aaa; width: 45px; display: inline-block;">3%</span>
                                    </div>
                                    <div class="vote-bar" style="margin-bottom: 12px;">
                                        <span class="vote-label"
                                            style="color: #aaa; width: 45px; display: inline-block;">二星</span>
                                        <div class="vote-progress"
                                            style="display: inline-block; width: calc(100% - 110px); height: 12px; background-color: rgba(255,255,255,0.1); border-radius: 6px; overflow: hidden; margin: 0 10px; vertical-align: middle;">
                                            <div class="vote-progress-bar"
                                                style="width: 1%; height: 100%; background: linear-gradient(45deg, #FF9800, #f57c00); transition: width 0.3s ease;">
                                            </div>
                                        </div>
                                        <span class="vote-percent"
                                            style="color: #aaa; width: 45px; display: inline-block;">1%</span>
                                    </div>
                                    <div class="vote-bar">
                                        <span class="vote-label"
                                            style="color: #aaa; width: 45px; display: inline-block;">一星</span>
                                        <div class="vote-progress"
                                            style="display: inline-block; width: calc(100% - 110px); height: 12px; background-color: rgba(255,255,255,0.1); border-radius: 6px; overflow: hidden; margin: 0 10px; vertical-align: middle;">
                                            <div class="vote-progress-bar"
                                                style="width: 1%; height: 100%; background: linear-gradient(45deg, #F44336, #e53935); transition: width 0.3s ease;">
                                            </div>
                                        </div>
                                        <span class="vote-percent"
                                            style="color: #aaa; width: 45px; display: inline-block;">1%</span>
                                    </div>
                                </div>
                                <div id="vote-count" class="vote-count"
                                    style="text-align: right; margin-top: 15px; font-size: 0.9em; color: #888;">基于
                                    135,280 人评分</div>
                            </div>
                        </div>

                        <div class="movie-overview"
                            style="margin-top: 25px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
                            <h3 style="margin-bottom: 15px; font-size: 1.4em;">剧情简介</h3>
                            <p id="movie-overview" style="line-height: 1.8; font-size: 1.05em;"></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <div id="trailerModal" class="modal">
            <div class="modal-content">
                <span class="close-modal">&times;</span>
                <div class="trailer-container">
                    <video id="movieTrailer" controls preload="metadata" poster="images/trailer-poster.jpg"
                        class="video-player">
                        <source src="" type="video/mp4">
                        <source src="" type="video/webm">
                        <p>您的浏览器不支持HTML5视频，请升级您的浏览器。</p>
                    </video>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="movie-content">
                <div class="main-content">
                    <section class="movie-cast">
                        <h2 class="section-title">演职人员</h2>
                        <div class="cast-container" style="padding: 15px 0;">
                            <div class="cast-scroll" id="movie-cast-list"
                                style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;">
                                <div class="cast-member director" style="flex-basis: 120px; text-align: center;">
                                    <div class="cast-photo">
                                        <img id="director-photo" src="" alt=""
                                            style="width: 100%; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
                                    </div>
                                    <div class="cast-info">
                                        <h4 id="director-name"></h4>
                                        <p id="director-role" class="cast-role"></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="movie-gallery">
                        <h2 class="section-title">剧照 <span class="count">(6)</span></h2>
                        <div class="gallery-grid" id="movie-gallery">
                        </div>
                    </section>

                    <section class="movie-specs">
                        <h2 class="section-title">技术规格</h2>
                        <table class="specs-table">
                            <tr>
                                <th>上映日期</th>
                                <td id="release-date">-</td>
                            </tr>
                            <tr>
                                <th>片长</th>
                                <td id="runtime">-</td>
                            </tr>
                            <tr>
                                <th>国家/地区</th>
                                <td id="country">-</td>
                            </tr>
                            <tr>
                                <th>语言</th>
                                <td id="language">-</td>
                            </tr>
                            <tr>
                                <th>色彩</th>
                                <td id="color">-</td>
                            </tr>
                            <tr>
                                <th>声音</th>
                                <td id="sound">-</td>
                            </tr>
                            <tr>
                                <th>放映格式</th>
                                <td id="format">-</td>
                            </tr>
                        </table>
                    </section>

                    <section class="movie-reviews">
                        <div class="section-header">
                            <h2 class="section-title">用户评论 <span class="count">(256)</span></h2>
                        </div>

                        <div class="reviews-list" id="reviews-list" style="margin-top: 30px;">
                        </div>

                        <div class="rating-form"
                            style="margin-top: 40px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 30px;">
                            <h3>发表您的评价</h3>
                            <form id="review-form">
                                <div class="rating-stars">
                                    <span class="star-label">您的评分：</span>
                                    <div class="stars-container">
                                        <i class="far fa-star" data-value="1"></i>
                                        <i class="far fa-star" data-value="2"></i>
                                        <i class="far fa-star" data-value="3"></i>
                                        <i class="far fa-star" data-value="4"></i>
                                        <i class="far fa-star" data-value="5"></i>
                                    </div>
                                    <span class="rating-value">0</span>
                                </div>
                                <div class="form-group">
                                    <label for="review-title">标题</label>
                                    <input type="text" id="review-title" name="title" placeholder="为您的评价添加一个标题">
                                </div>
                                <div class="form-group">
                                    <label for="review-content" >评价内容</label>
                                    <textarea id="review-content" name="content" rows="5"
                                        placeholder="写下您对这部电影的看法..."></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">发表评论</button>
                            </form>
                        </div>

                        <div id="review-moderation" class="review-moderation" style="display: none;">
                            <div class="moderation-content">
                                <div class="moderation-icon">
                                    <i class="fas fa-check-circle"
                                        style="font-size: 64px; color: #4CAF50; margin-bottom: 10px; filter: drop-shadow(0 3px 5px rgba(0,0,0,0.2));"></i>
                                </div>
                                <h3>评论提交成功</h3>
                                <p>您的评论已提交，正在等待审核</p>
                                <p class="moderation-info">为保证社区质量，所有评论将在审核后显示</p>
                                <p class="moderation-time">预计审核时间：24小时内</p>
                                <button id="new-review-btn" class="btn">发表新评论</button>
                            </div>
                        </div>
                    </section>
                </div>

                <aside class="sidebar">
                    <div class="sidebar-section watchlist">
                        <h3>我的收藏列表</h3>
                        <div class="drag-hint"><i class="fas fa-arrows-alt"></i> 拖拽影片可调整顺序</div>
                        <div class="watchlist-items" id="drag-items">
                            <div class="watchlist-item" draggable="true" data-id="2">
                                <img src="images/movie2.png" alt="霍比特人3：五军之战">
                                <div class="watchlist-item-info">
                                    <h4>霍比特人3：五军之战</h4>
                                </div>
                                <button class="btn-remove" title="从收藏列表中移除">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="watchlist-item" draggable="true" data-id="3">
                                <img src="images/movie3.png" alt="独行月球">
                                <div class="watchlist-item-info">
                                    <h4>独行月球</h4>
                                </div>
                                <button class="btn-remove" title="从收藏列表中移除">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="watchlist-item" draggable="true" data-id="4">
                                <img src="images/movie4.png" alt="爱乐之城">
                                <div class="watchlist-item-info">
                                    <h4>爱乐之城</h4>
                                </div>
                                <button class="btn-remove" title="从收藏列表中移除">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="login-message"
                            style="display: none; text-align: center; padding: 15px; color: #888;">
                            <i class="fas fa-user-lock" style="font-size: 24px; margin-bottom: 10px;"></i>
                            <p>请先登录以管理您的收藏</p>
                        </div>
                        <div class="empty-message"
                            style="display: none; text-align: center; padding: 15px; color: #888;">
                            <i class="far fa-heart" style="font-size: 24px; margin-bottom: 10px;"></i>
                            <p>您的收藏列表是空的</p>
                            <p class="empty-hint">浏览电影并点击 <i class="far fa-heart"></i> 来添加到收藏</p>
                        </div>
                    </div>

                    <div class="sidebar-section related-movies">
                        <h3>相关推荐</h3>
                        <div class="related-movie-items">
                            <a href="movie-detail.html?id=1" class="related-movie-item">
                                <img src="images/movie1.png" alt="">
                                <div class="related-movie-info">
                                    <h4>流浪地球2</h4>
                                    <div class="related-movie-meta">科幻 | 2023</div>
                                </div>
                            </a>
                            <a href="movie-detail.html?id=2" class="related-movie-item">
                                <img src="images/movie2.png" alt="">
                                <div class="related-movie-info">
                                    <h4>霍比特人3：五军之战</h4>
                                    <div class="related-movie-meta">动作 | 2014</div>
                                </div>
                            </a>
                            <a href="movie-detail.html?id=5" class="related-movie-item">
                                <img src="images/movie5.png" alt="">
                                <div class="related-movie-info">
                                    <h4>狮子王</h4>
                                    <div class="related-movie-meta">动画 | 2019</div>
                                </div>
                            </a>
                            <a href="movie-detail.html?id=4" class="related-movie-item">
                                <img src="images/movie4.png" alt="">
                                <div class="related-movie-info">
                                    <h4>爱乐之城 </h4>
                                    <div class="related-movie-meta">爱情 | 2016</div>
                                </div>
                            </a>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-columns">
                <div class="footer-column">
                    <h3>关于我们</h3>
                    <p>电影世界是您了解电影资讯、阅读影评、分享观影体验的理想平台。</p>
                </div>
                <div class="footer-column">
                    <h3>快速链接</h3>
                    <ul>
                        <li><a href="index.html">首页</a></li>
                        <li><a href="contact.html">联系我们</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>电影分类</h3>
                    <ul>
                        <li><a href="category.html?category=action">动作</a></li>
                        <li><a href="category.html?category=comedy">喜剧</a></li>
                        <li><a href="category.html?category=romance">爱情</a></li>
                        <li><a href="category.html?category=scifi">科幻</a></li>
                        <li><a href="category.html?category=horror">恐怖</a></li>
                        <li><a href="category.html?category=animation">动画</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>联系方式</h3>
                    <ul class="contact-info">
                        <li><i class="fas fa-envelope"></i> 111@movieworld.com</li>
                        <li><i class="fas fa-phone"></i> +86 123 4567 8901</li>
                        <li><i class="fas fa-map-marker-alt"></i> 浙江工业大学屏峰校区</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 电影世界 版权所有 | 隐私政策 | 使用条款 | 技术支持：浙江工业大学不想上早八团队</p>
            </div>
        </div>
    </footer>

    <button id="back-to-top" title="返回顶部"><i class="fas fa-arrow-up"></i></button>

    <script src="js/auth.js"></script>
    <script src="js/drag-drop.js"></script>
    <script src="js/movie-detail.js"></script>
    <script src="https://cdn.plyr.io/3.6.8/plyr.js"></script>
</body>

</html>